<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Bank Login - Restaurant Manager</title>
    <link rel="stylesheet" href="login.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="login-container">
        <section class="hero">
            <h1>Food Bank Portal</h1>
            <p>Access your food bank dashboard to manage donations and partnerships</p>
        </section>

        <section class="login-form-container">
            <form id="foodbankLoginForm" class="login-form" onsubmit="return false;">
                <div class="form-header">
                    <h2>Food Bank Login</h2>
                </div>

                <div class="form-group">
                    <label for="foodbankId">
                        <i class="fas fa-building"></i>
                        Food Bank ID
                    </label>
                    <input type="text" id="foodbankId" name="foodbankId" placeholder="Enter your Food Bank ID" required>
                </div>

                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        Password
                    </label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                </div>

                <div class="error-message" id="errorMessage"></div>

                <button type="submit" class="login-btn" id="loginButton">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </button>

                <div class="form-footer">
                    <a href="#" class="forgot-password">Forgot Password?</a>
                    <a href="foodbank_register.html" class="register-link">Register Your Food Bank</a>
                </div>

                <div class="alternate-login">
                    <p>Are you a Restaurant?</p>
                    <a href="login.html" class="restaurant-login-link">
                        <i class="fas fa-utensils"></i>
                        Restaurant Login
                    </a>
                </div>
            </form>
        </section>
    </div>

    <script>
        // Mock food bank credentials
        const mockFoodBanks = [
            {
                id: 'FB001',
                password: 'foodbank123',
                name: 'Community Food Bank'
            },
            {
                id: 'FB002',
                password: 'foodbank456',
                name: 'City Food Bank'
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('foodbankLoginForm');
            const foodbankIdInput = document.getElementById('foodbankId');
            const passwordInput = document.getElementById('password');
            const errorMessage = document.getElementById('errorMessage');
            const loginButton = document.getElementById('loginButton');

            // Show error message
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }

            // Clear error message
            function clearError() {
                errorMessage.textContent = '';
                errorMessage.style.display = 'none';
            }

            // Handle login
            loginButton.addEventListener('click', () => {
                clearError();

                const foodbankId = foodbankIdInput.value.trim();
                const password = passwordInput.value.trim();

                // Debug log
                console.log('Attempting login with:', { foodbankId, password });
                console.log('Available food banks:', mockFoodBanks);

                // Validate inputs
                if (!foodbankId || !password) {
                    showError('Please fill in all fields');
                    return;
                }

                // Check credentials
                const foodBank = mockFoodBanks.find(fb => {
                    console.log('Checking against:', fb);
                    return fb.id === foodbankId && fb.password === password;
                });

                if (foodBank) {
                    console.log('Login successful for:', foodBank);
                    // Store login state
                    localStorage.setItem('isFoodBankLoggedIn', 'true');
                    localStorage.setItem('foodBankId', foodbankId);
                    localStorage.setItem('foodBankName', foodBank.name);
                    
                    // Redirect to food bank dashboard
                    window.location.href = 'foodbank_dashboard.html';
                } else {
                    console.log('Login failed - no matching credentials found');
                    showError('Invalid Food Bank ID or password');
                }
            });

            // Clear error when user starts typing
            foodbankIdInput.addEventListener('input', clearError);
            passwordInput.addEventListener('input', clearError);

            // Check if already logged in
            if (localStorage.getItem('isFoodBankLoggedIn') === 'true') {
                window.location.href = 'foodbank_dashboard.html';
            }
        });
    </script>
</body>
</html> 